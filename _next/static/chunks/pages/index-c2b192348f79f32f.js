(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(5107)}])},5107:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(4848),l=a(5649),s=a(2636),i=a(6540),n=a(8226);a(7836);let o=e=>{let t=e.replace(/[^\w\s]/gi," ").trim().split(/\s+/).filter(e=>e.length>2).slice(0,6).join(" ");return t.length>40?t.substring(0,40)+"...":t},c=e=>e.slice(-6).map(e=>"".concat("user"===e.role?"User":"Assistant",": ").concat(e.content)).join("\n\n");function d(){let[e,t]=(0,i.useState)(()=>{{let e=localStorage.getItem("chatSessions");return e?JSON.parse(e):[{id:crypto.randomUUID(),title:"New Chat",messages:[],createdAt:new Date,lastUpdated:new Date}]}}),[a,s]=(0,i.useState)(()=>{{let e=localStorage.getItem("chatSessions"),t=e?JSON.parse(e):[];return t.length>0?t[0].id:crypto.randomUUID()}}),[d,u]=(0,i.useState)([]),m=(0,i.useMemo)(()=>e.find(e=>e.id===a),[e,a]);(0,i.useCallback)(e=>{u(e),t(t=>t.map(t=>{if(t.id===a){var r;let a=c(e),l=(null===(r=e[0])||void 0===r?void 0:r.content)?o(e[0].content):"New Chat";return{...t,messages:e,lastUpdated:new Date,title:l,context:a}}return t}))},[a]),(0,i.useEffect)(()=>{let t=setTimeout(()=>{e.length>0&&localStorage.setItem("chatSessions",JSON.stringify(e))},1e3);return()=>clearTimeout(t)},[e]),(0,i.useEffect)(()=>{m&&u(m.messages)},[null==m?void 0:m.id]);let[p,h]=(0,i.useState)(""),[g,x]=(0,i.useState)(!1),[f,b]=(0,i.useState)(null),[v,w]=(0,i.useState)(0),[y,N]=(0,i.useState)(!1),j=(0,i.useRef)(null);(0,i.useRef)(null);let[S,_]=(0,i.useState)(!1),[k,U]=(0,i.useState)(null),E=()=>{var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,i.useEffect)(()=>{E()},[d]);let C=(e,t,a)=>{let r=new Blob([e],{type:a}),l=URL.createObjectURL(r),s=document.createElement("a");s.href=l,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(l)},[O,D]=(0,i.useState)(!1);return(0,r.jsx)("div",{className:"flex flex-col flex-1 w-full h-full overflow-hidden",children:(0,r.jsx)("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-4 p-4",children:[d.map((e,t)=>(0,r.jsx)(l.P.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.2,ease:[.23,1,.32,1]},className:"flex ".concat("user"===e.role?"justify-end":"justify-start"," group"),children:(0,r.jsxs)("div",{className:"max-w-[85%] sm:max-w-[80%] rounded-2xl px-4 py-3 ".concat("user"===e.role?"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-lg shadow-emerald-500/20 ring-1 ring-white/20":e.error?"bg-red-500/10 text-white ring-1 ring-red-500/30":"bg-black/20 text-white backdrop-blur-sm ring-1 ring-white/10"," relative group-hover:shadow-xl transition-all duration-200"),children:[e.content,e.generatedFile&&(0,r.jsx)("div",{className:"mt-3 flex items-center gap-2",children:(0,r.jsxs)("button",{onClick:()=>C(e.generatedFile.content,e.generatedFile.name,e.generatedFile.type),className:"flex items-center gap-1.5 text-xs bg-emerald-500/20 hover:bg-emerald-500/30 active:bg-emerald-500/40 text-emerald-400 px-3 py-1.5 rounded-lg transition-all ring-1 ring-emerald-500/30",children:[(0,r.jsx)(n.A,{className:"w-3.5 h-3.5"}),"Download ",e.generatedFile.name]})}),e.timestamp&&(0,r.jsx)("div",{className:"text-xs opacity-0 group-hover:opacity-60 mt-1.5 transition-opacity",children:new Date(e.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})},t)),(0,r.jsx)("div",{ref:j,className:"h-4"})," "]})})})}function u(){return(0,r.jsxs)("main",{className:"h-[100dvh] supports-[height:100svh]:h-[100svh] supports-[height:100dvh]:h-[100dvh] bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-emerald-800 via-emerald-900 to-gray-900 relative overflow-hidden selection:bg-emerald-500/30 flex flex-col",children:[(0,r.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:.015},transition:{duration:1.2,delay:.2},className:"fixed inset-0 bg-[radial-gradient(circle_at_center,_rgba(255,255,255,0.1)_0%,_transparent_100%)] bg-[length:4px_4px] pointer-events-none mix-blend-plus-lighter"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/5 via-transparent to-black/20 pointer-events-none"}),(0,r.jsx)(s.l$,{position:"top-center",toastOptions:{style:{background:"rgba(10, 10, 10, 0.95)",color:"#fff",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},success:{iconTheme:{primary:"#059669",secondary:"#fff"}}}}),(0,r.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:[.22,1,.36,1]},className:"flex-1 w-full max-w-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full max-w-full relative",children:(0,r.jsx)(d,{})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[427,636,593,792],()=>t(2022)),_N_E=e.O()}]);